#include "stm32f3xx.h"
#include <main.h>


int main(void)
{

//Set RCC registers
	RCC->AHBENR |= RCC_AHBENR_GPIOEEN;
	RCC->AHBENR |= RCC_AHBENR_GPIOAEN;

//Set GPIO registers for LEDs
	GPIOE->MODER |=GPIO_MODER_MODER8_0;
	GPIOE->MODER |=GPIO_MODER_MODER9_0;
	GPIOE->MODER |=GPIO_MODER_MODER10_0;
	GPIOE->MODER |=GPIO_MODER_MODER11_0;
	GPIOE->MODER |=GPIO_MODER_MODER12_0;
	GPIOE->MODER |=GPIO_MODER_MODER13_0;
	GPIOE->MODER |=GPIO_MODER_MODER14_0;
	GPIOE->MODER |=GPIO_MODER_MODER15_0;

//Set GPIO registers for User Button
	GPIOE->MODER &= ~GPIO_MODER_MODER8_1;
	GPIOE->MODER &= ~GPIO_MODER_MODER9_1;
	GPIOE->MODER &= ~GPIO_MODER_MODER10_1;
	GPIOE->MODER &= ~GPIO_MODER_MODER11_1;
	GPIOE->MODER &= ~GPIO_MODER_MODER12_1;
	GPIOE->MODER &= ~GPIO_MODER_MODER13_1;
	GPIOE->MODER &= ~GPIO_MODER_MODER14_1;
	GPIOE->MODER &= ~GPIO_MODER_MODER15_1;

//Turn On all LEDs
	while(1)
	{
		if (GPIOA->IDR & GPIO_IDR_0){
			GPIOE->BSRR |= GPIO_BSRR_BS_8;
			GPIOE->BSRR |= GPIO_BSRR_BS_9;
			GPIOE->BSRR |= GPIO_BSRR_BS_10;
			GPIOE->BSRR |= GPIO_BSRR_BS_11;
			GPIOE->BSRR |= GPIO_BSRR_BS_12;
			GPIOE->BSRR |= GPIO_BSRR_BS_13;
			GPIOE->BSRR |= GPIO_BSRR_BS_14;
			GPIOE->BSRR |= GPIO_BSRR_BS_15;
		}

		else{
			GPIOE->BSRR |= GPIO_BSRR_BR_8;
			GPIOE->BSRR |= GPIO_BSRR_BR_9;
			GPIOE->BSRR |= GPIO_BSRR_BR_10;
			GPIOE->BSRR |= GPIO_BSRR_BR_11;
			GPIOE->BSRR |= GPIO_BSRR_BR_12;
			GPIOE->BSRR |= GPIO_BSRR_BR_13;
			GPIOE->BSRR |= GPIO_BSRR_BR_14;
			GPIOE->BSRR |= GPIO_BSRR_BR_15;
		}
	}
}